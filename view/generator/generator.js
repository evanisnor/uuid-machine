define(["lodash","ractive","controller/machine","enum/uuidformat","text!view/generator/generator.html","text!view/generator/footer.html","text!view/generator/formatOption.html","text!view/spinner/spinner.html","css!view/generator/generator.css","css!view/spinner/spinner.css"],function(e,t,n,r,i,s,o,u){var a=function(e){this.element=e,this.amount=1,this.formatting=[{"enum":r.Uppercase,selected:!1},{"enum":r.Hyphens,selected:!0},{"enum":r.Braces,selected:!0}],this.machine=new n([r.Hyphens,r.Braces]),this.machine.generate(this.amount),this.render()};return a.prototype.generate=function(e){var t=this;setTimeout(function(){t.machine.generate(t.amount),e&&e()},1)},a.prototype.format=function(t){var n=this;setTimeout(function(){var r=e.pluck(e.filter(n.formatting,function(e){return e.selected}),"enum");n.machine.format(r),t&&t()},1)},a.prototype.clear=function(e){var t=this;setTimeout(function(){t.machine.clear(),e&&e()},1)},a.prototype.render=function(){var e=this;e.ractive=new t({el:e.element
,template:i,partials:{footer:s,spinner:u,formatOption:o},data:{amount:e.amount,formatting:e.formatting,uuidlist:e.machine.formatted,hasUuids:!0,hasManyUuids:!1,isWorking:!1}}),e.ractive.on("amount-update",function(){e.amount=this.data.amount}),e.ractive.on("generate",function(){e.ractive.set("isWorking",!0),e.generate(function(){e.ractive.set("uuidlist",e.machine.formatted),e.ractive.set("hasUuids",e.machine.formatted.length>0),e.ractive.set("hasManyUuids",e.machine.formatted.length>=50),e.ractive.set("isWorking",!1)})}),e.ractive.on("format",function(t,n){e.ractive.set("isWorking",!0),navigator.userAgent.indexOf("Firefox/")!=-1&&t.node.tagName==="INPUT"&&(e.formatting[n].selected=!e.formatting[n].selected),t.original.stopPropagation(),e.format(function(){e.ractive.set("uuidlist",e.machine.formatted),e.ractive.set("hasUuids",e.machine.formatted.length>0),e.ractive.set("hasManyUuids",e.machine.formatted.length>=50),e.ractive.set("isWorking",!1)})}),e.ractive.on("clear",function(){e.ractive
.set("isWorking",!0),e.clear(function(){e.ractive.set("uuidlist",e.machine.formatted),e.ractive.set("hasUuids",e.machine.formatted.length>0),e.ractive.set("hasManyUuids",e.machine.formatted.length>=50),e.ractive.set("isWorking",!1)})})},a});